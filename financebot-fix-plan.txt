PROJECT: Fix FinanceBot Pro v4.0
LOCATION: /mnt/c/Users/oded.be/tradebot_v3/

CRITICAL FIXES REQUIRED:

1. FIX PORTFOLIO ANALYZER:
   - Add missing p-limit import: const pLimit = require('p-limit');
   - Fix the performAnalysis method in PortfolioAnalyzer class
   - Ensure CSV parsing works with proper error handling
   - Add portfolio performance calculations and visualizations

2. UPGRADE CHARTS/GRAPHS:
   - Replace basic line chart with professional financial charts
   - Add Chart.js or Plotly.js for better visualizations
   - Implement: candlestick, OHLC, volume bars, moving averages
   - Add interactive tooltips, zoom, pan features
   - Include RSI, MACD indicators below main chart

3. IMPROVE DATA PRESENTATION:
   - Create formatAsTable() function for comparative data
   - Add trend indicators (▲▼) and color coding
   - Implement sparkline mini-charts in text responses
   - Use proper HTML tables for "X vs Y" comparisons

4. FIX INTENT CLASSIFIER:
   - Reduce context boost weight from current values
   - Add explicit non-financial keyword detection
   - Implement confidence threshold for financial classification
   - Add fallback to general queries when confidence < 0.8

5. IMPROVE ERROR HANDLING:
   - Add symbol validation before API calls
   - Implement fallback data sources for failed requests
   - Better error messages for invalid symbols
   - Cache valid symbols to avoid repeated failures

6. ADD MISSING FEATURES:
   - Sector performance heatmaps
   - Portfolio diversification analysis
   - Risk metrics calculations
   - Historical performance comparisons
   - Export functionality for reports

TESTING REQUIREMENTS:
- Test portfolio upload with sample CSV
- Verify all chart types render correctly
- Test intent classification with mixed queries
- Ensure error handling works for invalid symbols
- Verify table formatting for comparisons
- Test with high-load scenarios

Start with the most critical issue: Fix the portfolio analyzer import error.
Then proceed through each fix systematically.
Test each fix before moving to the next.
